<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>PAGE</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/normalize.css">
        <style>
        	ul,li{list-style: none;margin:0;padding:0;}
        	.slide{position: relative;width:600px;height:300px;margin:40px auto;}
        	.slide-content{margin:0;padding:0;overflow:hidden;height:100%;width:100%;}
        	.slide .slide-item{background:#369;font-size:24px;text-align:center;line-height:300px;}
        	.slide .slide-trigger{position:absolute;bottom:10px;left:50%;margin-left:-40px;width:80px;z-index:12;text-align:center;}
        	.slide .slide-trigger li{width:10px;height:10px;margin-right:10px;float:left;background:#525654;color:#fff;overflow:hidden;text-indent:2em;cursor:pointer;
        	    -webkit-border-radius:10px;
        	   -moz-border-radius:10px;
        	   border-radius:10px;
        	}
        	.slide li a{text-decoration:none;color:#fff;}
        	.slide .slide-trigger .current{background:#000;}
        	.slide-prev, .slide-next{z-index:13;position:absolute;top:50%;margin-top:-18px;width:36px;height:36px;background:url(./images/arrow.png) no-repeat;}
        	.slide-prev{left:0;background-position:0 -38px;}
        	.slide-next{right:0;background-position:0 0;}
        	.slide-prev:hover{background-position:-38px -38px;}
        	.slide-next:hover{background-position:-38px 0;}
        	
        </style>
    </head>
    <body>
		<div  class="col-list">
			<div class="slide">
				<ul class="slide-content">
					<li class="slide-item"><a href="http://www.baidu.com/"><img src="./images/20140812093652cc4ef.jpg" width="620" height="300"></a></li>
					<li class="slide-item"><a href="http://www.baidu.com/"><img src="./images/620300_0826.jpg" width="620" height="300"></a></li>
					<li class="slide-item"><a href="http://www.baidu.com/"><img src="./images/20140818075649a75e5.jpg" width="620" height="300"></a></li>
					<li class="slide-item"><a href="http://www.baidu.com/"><img src="./images/20140827090154c47ff.jpg" width="620" height="300"></a></li>
				</ul>
				<a class="slide-prev" href="javascript:void(0);"></a><a class="slide-next" href="javascript:void(0);"></a>
			</div>
		</div>
        <script src="js/jquery.1.7.2.js"></script>
        <script>
        	(function($, window, undefined){
        		var Jswitch =  function(options, _$){
        			this.cfg = options;
        			this._content = _$.children('.slide-content');
        			this._width = this._content.width();
        			this._items = this._content.children('.slide-item');
        			this._len = this._items.size();
        			this._index = 0;
        			this.switching = false;
        			this.timer = false;
        			
        			this.init(); //初始化
        			this.trigger(); //生成trigger
        			this.bindEvent(); //绑定上下按钮事件
        		};
        		
        		Jswitch.prototype.init = function(){
        			this._content.css({
        				'position' : 'relative'
        			});
        			this._items.css({
        				'position' : 'absolute',
        				'zIndex' : '5',
        				'width' : this._width
        			}).eq(0).css('zIndex', '6');
        			
        			this.auto();
        		};
        		
        		Jswitch.prototype.trigger =  function(){
        			var _ = this,
        			    arr = [],
        			    i = 0,
        			    trigger;
        			    
        			if(!this.cfg.trigger){return false;}   
        			for( ; i < this._len; i++){
        				arr.push("<li>"+ (i+1) +"</li>");
        			}
        			trigger  = $("<ul/>", {
        				'class' : this.cfg.triggerClass,
        				'html' : arr.join('')
        			});
        			
        			this._content.after(trigger);
        			this._triggers = trigger.find('li');
        			
        			this._triggers.on('click', function(){
        			    var	index = $(this).index();
        			     console.log('click = ' + index);
        				_.switchTo(index);
        			}).eq(0).addClass('current'); //并绑定点击事件,激活当前类
        		
        			
        		
        		};
        		
        		Jswitch.prototype.bindEvent =  function(){
        			var _ = this;
        			if(this.cfg.prev){
        			    $(this.cfg.prev).on('click', function(){
        			       var index = (_._index + _._len - 1) % _._len;
        			        _.switchTo(index);
        			    });
        			}
        			if(this.cfg.next){
        			    $(this.cfg.next).on('click', function(){
        			       var index = (_._index + 1) % _._len;
        			        _.switchTo(index);
        			    });
        			}
        		};
        		
        		Jswitch.prototype.switchTo =  function(index){
        			var _ = this;
        			
        			if(index == _._index || _.switching){return;} //避免快速点击动画频闪及到本身的点击
        			
        			_.switching = true;
        			clearTimeout(_.timer);
        			
        			_._items.eq(index).css({
        				opacity : '0',
        				zIndex : '7'
        			}).animate({
        				opacity : "1"
        			}, _.cfg.duration, function(){
        				$(this).css('zIndex', '6');
        				_.switching = false; //更新图片轮转表示为false
        				_.auto(); // 开启定时器
        			});
        			
        			_._items.eq(this._index).animate({
        				opacity : '0'
        			}, _.cfg.duration, function(){
        				$(this).css('zIndex', '5');
        			});
        			
        			_._index = index;  //更新_index
        			_.updateTrigger(); //更新trigger
        		};
        		
        		Jswitch.prototype.updateTrigger =  function(){
        		    if(!this.cfg.trigger){return false;}
        			this._triggers.removeClass('current').eq(this._index).addClass('current');
        		};
        		
        		Jswitch.prototype.auto =  function(){
        		    var  _ = this;
        		    if(_.cfg.autoplay){
        		        _.timer = setTimeout(function(){
        		            var index = (_._index + 1) % _._len ;
        		            _.switchTo(index);
        		        }, 5000);
        		    }
        		};
        		
        		
        		$.fn.jswitch = function(options){
        			var defaults = {
        				autoplay : true,
        				interval : 5000,
        				triggerClass : "slide-trigger",
        				trigger : true,
        				duration : 500,
        				effect : 'fade' // fade, slideLeft, slideUp
        			};
        			defaults = $.extend(defaults, options);
        			var slide = new Jswitch(defaults, $(this));
        			return this; 
        		};
        		
        	})(jQuery, this);
        	
        	$(".slide").jswitch({
        	    next : ".slide-next",
        	    prev : ".slide-prev"
        	});
        </script>
    </body>
</html>
