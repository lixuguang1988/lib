<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>拖拽排序</title>
    <style type="text/css">
        body{}
        .drag-sort-lst{position: relative;z-index:5;margin:0 auto;width:600px;overflow:hidden;}
        .drag-sort-item{margin-bottom:10px;float:left;width:578px;padding:10px;background:#fff;border:1px solid #DDD;}
        .drag-sort-sn{cursor:move;border-radius:50%;-webkit-border-radius:50%;float:left;width:30px;height:30px;background:#EAEAEA;text-align:center;font:14px/30px arial;margin:5px 0 0}
        .drag-sort-main{float:right;width:530px;font:14px/26px "simsun";}
        .drag-sort-helper{opacity: .1;filter:alpha(opacity=10);background: green;border:1px dashed #ddd;}
    </style>

</head>
<body>
        <div class="drag-sort-lst" id="DragSort">
            <div class="drag-sort-item">
                <span class="drag-sort-sn">1</span>
                <div class="drag-sort-main">明确，发挥市场在资源配置中的决定性作用，以体制机制创新激发新活力，以消费环境改善和市场秩序规范释放新空间，以扩大有效供给和品质提升满足新需求，以创新驱动产品升级和产业发展，推动消费和投资良性互动、产业升级和消费升级协同共进、创新驱动和经济转型有效对接，构建消费升级、有效投资、创新驱动、经济转型有机结合的发展路径，为经济提质增效升级提供更持久、更强劲的动力</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">2</span>
                <div class="drag-sort-main">我国消费结构正在发生深刻变化，以消费新热点、消费新模式为主要内容的消费升级，将引领相关产业、基础设施和公共服务投资迅速成长，拓展未来发展新空间。为此，《意见》明确了服务消费、信息消费、绿色消费、时尚消费、品质消费、农村消费等六个消费升级重点领域和方向。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">3</span>
                <div class="drag-sort-main">就在一天前，中国政府网还全文公布了国务院印发的另一份鼓励消费的文件，即《加快发展生活性服务业促进消费结构升级的指导意见》。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">4</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">5</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">6</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">7</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">8</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
            <div class="drag-sort-item">
                <span class="drag-sort-sn">9</span>
                <div class="drag-sort-main">业内专家指出，国务院连发两文鼓励消费升级，从文件内容来看，在引导消费增长方面，将更加注重供给侧的改革，即不再像过去那样强调在需求端的消费刺激政策，而是将更加注重新消费模式的供给以及消费环境的改善等。而在获得重点鼓励的几大领域中，服务消费备受重视，有望成为引领消费升级的“主引擎”。</div>
            </div>
        </div>
        <script src="./js/jquery.1.7.2.js"></script>
        <script>
                function Dragsort(jo){
                    this.wrap = jo;
                    this.items = this.wrap.children();
                    this.items.on("mousedown", $.proxy(this.mousedownHandle, this));
                    this.zIndex = isNaN(this.items.css('z-index')) ? 3 : parseInt(this.items.css('z-index'));


                    return this;
                }


                /**
                 * @param event
                 */
                Dragsort.prototype.mousedownHandle = function(event){

                    var self = this,
                            moveItem = $(event.currentTarget),
                            mIOffset = moveItem.position(),
                            helperHeight = 0;
                    if($(event.target).hasClass("drag-sort-sn")){ //让其他文本内容可以正常选中
                        if(self.moveItem){//mouseup事件出问题的时候
                            self.moveItem.css("position", "relative");
                            self.wrap.find(".drag-sort-helper").remove();
                        }

                        self.moveItem = moveItem;
                        helperHeight = moveItem.height();
                        self.helper = $("<div class=\"drag-sort-item drag-sort-helper\"></div>").height(helperHeight);
                        moveItem.before(self.helper).css({
                            left : mIOffset.left + "px",
                            top : mIOffset.top + "px",
                            zIndex :　parseInt(this.zIndex, 10) + 1,
                            position: "absolute"
                        });

                        self.lastY = event.pageY;

                        moveItem.on("mousemove", $.proxy(self.mousemoveHandle, self));
                        $(document).on("mouseup", $.proxy(self.mouseupHandle, self));
                        self.items.not(moveItem).on("mousemove", $.proxy(self.mouseoverHandle, self));
                    }

                };


                Dragsort.prototype.mouseupHandle = function(event){
                    var self = this;
                    if(!this.moveItem){return false;}
                    self.moveItem.css({
                        left : "0",
                        top : "0",
                        zIndex : this.zIndex,
                        position: "relative"
                    });
                    self.helper.remove();
                    self.moveItem.off("mousemove");
                    self.moveItem.off("mouseup");
                    self.items.not(self.moveItem).off("mousemove");
                    self.moveItem = null;
                }

                /**
                 * 拖拽对象移动的处理函数
                 * @param event
                 */
                Dragsort.prototype.mousemoveHandle =  function(event){
                    if(!this.moveItem){return false;}
                    var diffy = event.pageY - this.lastY;
                    this.moveItem.css({
                        top : "+=" + diffy
                    });
                    this.lastY = event.pageY;
                    event.preventDefault();
                };


                /**
                 * 拖拽对象移动到目标对象的处理函数
                 * @param event
                 */
                Dragsort.prototype.mouseoverHandle =  function(event){

                };

                var ds = new Dragsort($("#DragSort"));
                //console.log(ds);


        </script>
</body>
</html>
